{"version":3,"sources":["components/Modal/Modal.js","utils/getArrDataAnnualTaxDeductions.js","utils/getOrdinal.js","components/ModalWithCalcForm/ModalWithCalcForm.js","hooks/useFormWithValidation.js","components/App/App.js","index.js"],"names":["modalContext","createContext","Modal","children","isOpen","onClose","styleSettings","modalRef","createRef","keyListenersMap","Map","useEffect","keyListeter","evt","listener","get","key","document","addEventListener","removeEventListener","handleClickClose","target","classList","contains","current","querySelector","focus","createPortal","className","overlay","role","aria-modal","container","content","ref","Provider","value","body","Header","props","useContext","header","closeButton","title","onClick","Body","main","Footer","footer","DEFAULT_VALUE_OF_PROPERTY","DEFAULT_VALUE_OF_PROPERTY_LIMITER","MAXIMUM_TAX_DEDUCTION","getArrDataAnnualTaxDeductions","monthlySalary","propertyValue","propertyValueLimiter","maxTaxDeduction","arrWithCalcData","taxDeductionPerYear","totalTaxDeduction","push","getOrdinal","num","str","toString","endsWith","ModalWithForm","onSubmit","STYLE_SETTINGS","headerTextContainer","headerTitle","headerText","form","fieldsetCheckbox","fieldsetRadio","fieldsetRadioContainer","fieldsetLegend","labelNumberField","labelRadioButton","inputNumberField","inputNumberFieldError","labelCheckbox","labelCheckboxSpan","inputCheckbox","visibleInputCheckbox","inputRadioContainer","inputRadio","visibleInputRadio","formTextButton","submitButton","TEXT_SETTINGS","useState","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","useCallback","newErrors","newIsValid","handleChange","name","type","checked","validationMessage","closest","checkValidity","useFormWithValidation","React","taxDeductions","setTaxDeductions","formNumberFieldsMarkup","id","label","placeholder","errorText","required","map","elem","onChange","aria-live","formRadioButtonsMarkup","noValidate","preventDefault","salary","length","index","Intl","NumberFormat","format","uuid","disabled","App","isModalOpen","setIsModalOpen","handleToggleModalIsOpen","ModalWithCalcForm","data","console","log","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5c7eb4ff.chunk.js","sourcesContent":["import React, { createContext, useContext, createRef, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalContext = createContext();\n\nfunction Modal({\n  children,\n  isOpen,\n  onClose,\n  styleSettings,\n}) {\n\n  const modalRef = createRef();\n\n  const setFocusOnCloseModalButton = () => {\n    const closeModalButton = modalRef.current.querySelector('button');\n    closeModalButton.focus();\n  }\n\n  const keyListenersMap = new Map([['Escape', onClose]]);\n\n  useEffect(() => {\n    const keyListeter = (evt) => {\n      const listener = keyListenersMap.get(evt.key);\n      if (listener) {\n        listener(evt);\n      }\n    }\n\n    document.addEventListener('keydown', keyListeter);\n\n    return () => {\n      document.removeEventListener('keydown', keyListeter);\n    }\n  })\n\n  useEffect(() => {\n    const handleClickClose = (evt) => {\n      if (evt.target.classList.contains('overlay')) {\n        onClose();\n      }\n    }\n\n    document.addEventListener('click', handleClickClose);\n    return () => {\n      document.removeEventListener('click', handleClickClose);\n    }\n  })\n\n  useEffect(() => {\n    if (isOpen) {\n      setFocusOnCloseModalButton()\n    }\n  }, [isOpen])\n\n  return createPortal(\n    <div\n      className={`${styleSettings.overlay} overlay`}\n      role=\"dialog\"\n      aria-modal=\"true\"\n    >\n      <div\n        className={styleSettings.container}\n      >\n        <div\n          className={styleSettings.content}\n          ref={modalRef}\n        >\n          <modalContext.Provider value={{ onClose, styleSettings }}>\n            {children}\n          </modalContext.Provider>\n        </div>\n      </div>\n    </div>,\n    document.body\n  )\n}\n\nModal.Header = function ModalHeader(props) {\n  const { onClose, styleSettings } = useContext(modalContext);\n\n  return (\n    <header\n      className={styleSettings.header}\n    >\n      <button\n        className={styleSettings.closeButton}\n        title=\"закрыть модальное окно\"\n        onClick={onClose}\n      />\n      {props.children}\n    </header>\n  )\n}\n\nModal.Body = function ModalBody(props) {\n  const { styleSettings } = useContext(modalContext);\n\n  return (\n    <main\n      className={styleSettings.main}\n    >\n      {props.children}\n    </main>\n  )\n}\n\nModal.Footer = function ModalFooter(props) {\n  const { styleSettings } = useContext(modalContext);\n\n  return (\n    <footer\n      className={styleSettings.footer}\n    >\n      {props.children}\n    </footer>\n  )\n}\n\nexport default Modal;\n","const DEFAULT_VALUE_OF_PROPERTY = 3000000;\nconst DEFAULT_VALUE_OF_PROPERTY_LIMITER = 2000000;\nconst MAXIMUM_TAX_DEDUCTION = 260000;\nconst TAX_DEDUCTION_PERCENTAGE = 0.13;\n\nconst NUMBER_OF_MOUNTHS_OF_YEAR = 12;\n\nconst getArrDataAnnualTaxDeductions = (\n  monthlySalary,\n  propertyValue = DEFAULT_VALUE_OF_PROPERTY,\n  propertyValueLimiter = DEFAULT_VALUE_OF_PROPERTY_LIMITER,\n  maxTaxDeduction = MAXIMUM_TAX_DEDUCTION,\n) => {\n  const arrWithCalcData = [];\n\n  const taxDeductionPerYear = (monthlySalary * NUMBER_OF_MOUNTHS_OF_YEAR) * TAX_DEDUCTION_PERCENTAGE;\n\n  let totalTaxDeduction = 0;\n\n  if (propertyValue < propertyValueLimiter) {\n    while (totalTaxDeduction + taxDeductionPerYear <= propertyValue) {\n      totalTaxDeduction += taxDeductionPerYear;\n      arrWithCalcData.push(taxDeductionPerYear);\n    };\n    if (totalTaxDeduction < propertyValue) {\n      arrWithCalcData.push(propertyValue - totalTaxDeduction);\n    };\n    return arrWithCalcData;\n  }\n\n  if (propertyValue >= propertyValueLimiter) {\n    if (taxDeductionPerYear >= maxTaxDeduction) {\n      arrWithCalcData.push(maxTaxDeduction);\n    } else {\n      while (totalTaxDeduction + taxDeductionPerYear <= maxTaxDeduction) {\n        totalTaxDeduction += taxDeductionPerYear;\n        arrWithCalcData.push(taxDeductionPerYear);\n      };\n      if (totalTaxDeduction < maxTaxDeduction) {\n        arrWithCalcData.push(maxTaxDeduction - totalTaxDeduction);\n      };\n    };\n    return arrWithCalcData;\n  };\n};\n\nexport default getArrDataAnnualTaxDeductions;\n","const getOrdinal = (num) => {\n  const str = num.toString();\n  if (str.endsWith('12') ||\n    str.endsWith('13') ||\n    str.endsWith('16') ||\n    str.endsWith('17') ||\n    str.endsWith('18')) {\n      return ' -ый ';\n    } else if (str.endsWith('2') ||\n      str.endsWith('6') ||\n      str.endsWith('7') ||\n      str.endsWith('8') ||\n      str.endsWith('40')) {\n    return ' -ой ';\n  } else if (str.endsWith('3')) {\n    return ' -ий ';\n  } else {\n    return ' -ый ';\n  }\n}\n\nexport default getOrdinal;\n","import React from 'react';\nimport uuid from 'react-uuid';\n\nimport Modal from '../Modal/Modal';\n\nimport useFormWithValidation from '../../hooks/useFormWithValidation';\n\nimport getArrDataAnnualTaxDeductions from '../../utils/getArrDataAnnualTaxDeductions';\n\nimport getOrdinal from '../../utils/getOrdinal';\n\nfunction ModalWithForm({\n  isOpen,\n  onClose,\n  onSubmit,\n}) {\n\n  const STYLE_SETTINGS = {\n    overlay: 'modal-with-calc-form',\n    container: 'modal-with-calc-form__container',\n    content: 'modal-with-calc-form__content',\n    header: 'modal-with-calc-form__header',\n    headerTextContainer: 'modal-with-calc-form__header-text-container',\n    headerTitle: 'modal-with-calc-form__header-title',\n    headerText: 'modal-with-calc-form__header-text',\n    closeButton: 'modal-with-calc-form__close-button',\n    main: 'modal-with-calc-form__main',\n    form: 'modal-with-calc-form__form',\n    fieldsetCheckbox: 'modal-with-calc-form__form-checkbox-fieldset',\n    fieldsetRadio: 'modal-with-calc-form__form-fieldset-radio',\n    fieldsetRadioContainer: 'modal-with-calc-form__form-fieldset-radio-container',\n    fieldsetLegend: 'modal-with-calc-form__form-fieldset-legend',\n    labelNumberField: 'modal-with-calc-form__form-label-number-field',\n    labelRadioButton: 'modal-with-calc-form__form-label-radio-button',\n    inputNumberField: 'modal-with-calc-form__form-input-number',\n    inputNumberFieldError: 'modal-with-calc-form__form-input-number-error',\n    labelCheckbox: 'modal-with-calc-formm__form-label-checkbox',\n    labelCheckboxSpan: 'modal-with-calc-form__form-label-checkbox-span',\n    inputCheckbox: 'modal-with-calc-form__form-input-checkbox',\n    visibleInputCheckbox: 'modal-with-calc-form__form-input-checkbox-visible',\n    inputRadioContainer: 'modal-with-calc-form__form-input-radio-container',\n    inputRadio: 'modal-with-calc-form__form-input-radio',\n    visibleInputRadio: 'modal-with-calc-form__form-input-radio-visible',\n    formTextButton: 'modal-with-calc-form__form-text-button',\n    submitButton: 'modal-with-calc-form__form-submit-button',\n    footer: 'modal-with-calc-form__footer',\n  };\n\n  const TEXT_SETTINGS = {\n    headerTitle: 'Налоговый вычет',\n    headerText: 'Используйте налоговый вычет чтобы погасить ипотеку досрочно. Размер налогового вычета составляет не более 13% от своего официального годового дохода.',\n    labelTextField: 'Ваша зарплата в месяц',\n    formTextButton: 'Рассчитать',\n    fieldsetCheckboxLegend: 'Итого можете внести в качестве досрочных:',\n    fieldsetRadioLegend: 'Что уменьшаем?',\n    labelCheckbox: ' рублей в',\n    spanLabelCheckbox: 'год',\n    submitButton: 'Добавить',\n  };\n\n  const FORM_NUMBER_FIELDS_DATA = [\n    {\n      id: 1,\n      label: 'Ваша зарплата в месяц',\n      placeholder: 'Введите данные',\n      errorText: 'Поле обязательно для заполнения',\n      name: 'salary',\n      type: 'number',\n      required: true,\n    },\n  ];\n\n  const FORM_RADIO_BUTTONS_DATA = [\n    {\n      id: 1,\n      label: 'Платёж',\n      name: 'subject',\n      value: 'payment',\n      type: 'radio',\n    },\n    {\n      id: 2,\n      label: 'Срок',\n      name: 'subject',\n      value: 'time',\n      type: 'radio',\n    },\n  ];\n\n  const {\n    values,\n    errors,\n    isValid,\n    handleChange,\n    resetForm,\n  } = useFormWithValidation({});\n\n  const [taxDeductions, setTaxDeductions] = React.useState([]);\n\n  const formNumberFieldsMarkup = FORM_NUMBER_FIELDS_DATA.map((elem) => (\n    <label\n      key={elem.id}\n      name={elem.name}\n      type={elem.type}\n      className={STYLE_SETTINGS.labelNumberField}\n    >\n      {elem.label}\n      <input\n        className={STYLE_SETTINGS.inputNumberField}\n        placeholder={elem.placeholder}\n        name={elem.name}\n        type={elem.type}\n        value={values[elem.name] || ''}\n        onChange={handleChange}\n      />\n      {!isValid && (\n        <span\n          className={STYLE_SETTINGS.inputNumberFieldError}\n          aria-live=\"polite\"\n        >\n          {errors[elem.name]}\n        </span>\n      )}\n    </label>\n  ));\n\n  const formRadioButtonsMarkup = FORM_RADIO_BUTTONS_DATA.map((elem) => (\n    <label\n      key={elem.id}\n      className={STYLE_SETTINGS.labelRadioButton}\n    >\n      <input\n        className={STYLE_SETTINGS.inputRadio}\n        name={elem.name}\n        value={elem.value}\n        checked={elem.value === values[elem.name]}\n        onChange={handleChange}\n        type={elem.type}\n      />\n        <span className={STYLE_SETTINGS.visibleInputRadio}>{elem.label}</span>\n    </label>\n  ));\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    onSubmit({ values, taxDeductions })\n    resetForm();\n    setTaxDeductions([]);\n    onClose();\n  };\n\n  const handleClickCalcTaxDeduction = () => {\n    if (values.salary) {\n      setTaxDeductions(getArrDataAnnualTaxDeductions(values.salary));\n    }\n  };\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      styleSettings={STYLE_SETTINGS}\n    >\n      <Modal.Header>\n        <h2\n          className={STYLE_SETTINGS.headerTitle}\n        >\n          {TEXT_SETTINGS.headerTitle}\n        </h2>\n        <p\n          className={STYLE_SETTINGS.headerText}\n        >\n          {TEXT_SETTINGS.headerText}\n        </p>\n      </Modal.Header>\n      <Modal.Body>\n        <form\n          className={STYLE_SETTINGS.form}\n          noValidate\n          onSubmit={handleSubmit}\n        >\n          {formNumberFieldsMarkup}\n          <button\n            className={STYLE_SETTINGS.formTextButton}\n            onClick={handleClickCalcTaxDeduction}\n            type=\"button\"\n          >\n            {TEXT_SETTINGS.formTextButton}\n          </button>\n          {taxDeductions.length > 0 && (\n            <fieldset\n              className={STYLE_SETTINGS.fieldsetCheckbox}\n            >\n              <legend\n                className={STYLE_SETTINGS.fieldsetLegend}\n              >\n                {TEXT_SETTINGS.fieldsetCheckboxLegend}\n              </legend>\n              {\n                taxDeductions.map((elem, index) => (\n                  <label\n                    key={uuid()}\n                    className={STYLE_SETTINGS.labelCheckbox}\n                  >\n                    <input\n                      className={STYLE_SETTINGS.inputCheckbox}\n                      type=\"checkbox\"\n                      name={`year${index + 1}`}\n                      onChange={handleChange}\n                      checked={values[`year${index + 1}`]}\n                    />\n                    <span className={STYLE_SETTINGS.visibleInputCheckbox}></span>\n                    {Intl.NumberFormat('ru-RU').format(elem) + TEXT_SETTINGS.labelCheckbox}\n                    <span\n                      className={STYLE_SETTINGS.labelCheckboxSpan}\n                    >\n                      {` ${index + 1}` + getOrdinal(index + 1) + TEXT_SETTINGS.spanLabelCheckbox}\n                    </span>\n                  </label>\n                ))\n              }\n            </fieldset>\n          )}\n\n\n          <fieldset\n            className={STYLE_SETTINGS.fieldsetRadio}\n          >\n            <div\n              className={STYLE_SETTINGS.fieldsetRadioContainer}\n            >\n              <legend\n                className={STYLE_SETTINGS.fieldsetLegend}\n              >\n                {TEXT_SETTINGS.fieldsetRadioLegend}\n              </legend>\n              <div\n                className={STYLE_SETTINGS.inputRadioContainer}\n              >\n                {formRadioButtonsMarkup}\n              </div>\n            </div>\n\n          </fieldset>\n          <button\n            className={STYLE_SETTINGS.submitButton}\n            type=\"submit\"\n            disabled={!isValid}\n          >\n            {TEXT_SETTINGS.submitButton}\n          </button>\n        </form>\n      </Modal.Body>\n    </Modal>\n  )\n}\n\nexport default ModalWithForm;\n","import { useState, useCallback } from \"react\";\n\nexport default function useFormWithValidation() {\n\n  const [values, setValues] = useState({});\n  const [errors, setErrors] = useState({});\n  const [isValid, setIsValid] = useState(false);\n\n  const handleChange = (evt) => {\n    const target = evt.target;\n    const name = target.name;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n\n    setValues({\n      ...values,\n      [name]: value\n    });\n\n    setErrors({\n      ...errors,\n      [name]: target.validationMessage\n    });\n\n    setIsValid(target.closest('form').checkValidity());\n  };\n\n  const resetForm = useCallback(\n    (newValues = {}, newErrors = {}, newIsValid = false) => {\n      setValues(newValues);\n      setErrors(newErrors);\n      setIsValid(newIsValid);\n    },\n    [setValues, setErrors, setIsValid]\n  );\n\n  return {\n    values,\n    errors,\n    isValid,\n    handleChange,\n    resetForm,\n  };\n};\n","import React from 'react';\n\nimport ModalWithCalcForm from '../ModalWithCalcForm/ModalWithCalcForm';\n\nfunction App() {\n\n  const MODAL_BUTTON_TEXT = 'Налоговый вычет';\n\n  const [isModalOpen, setIsModalOpen] = React.useState(false);\n\n  const handleToggleModalIsOpen = () => {\n    setIsModalOpen(!isModalOpen);\n  };\n\n  const handleFormSubmit = (data) => {\n    console.log(data);\n  };\n\n  return (\n    <div className=\"app\">\n      <button\n        className=\"app__modal-button\"\n        onClick={handleToggleModalIsOpen}\n      >\n        {MODAL_BUTTON_TEXT}\n      </button>\n      {isModalOpen && (\n        <ModalWithCalcForm\n          onSubmit={handleFormSubmit}\n          isOpen={isModalOpen}\n          onClose={handleToggleModalIsOpen}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}